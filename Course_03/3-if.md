# 조건문과 반복문

## ▣ 조건문

### 조건 분기

- 어떤 문제를 풀려면 코드의 실행을 제어하는 구문인 **제어문(control statement)**이 필요!
- **조건문**은 조건이 참이라면 어떤 문장을 실행하고, 거짓이라면 다른 문장을 실행(또는 아무것도 하지 않음)
- 이러한 조건문의 동작을 **조건 분기**라고 함
- 조건 분기는 참, 거짓 값을 도출하는 표현식을 사용

### 관계 표현식과 일치 표현식

|그룹|이름|연산자|표현식|우선순위|결합방향|
|--|--|--|--|--|--|
|관계 표현식|작음, 작거나 같음, 큼, 크거나 같음|<, <=, >, >=|표현식<표현식, 표현식<=표현식, 표현식>표현식, 표현식>=표현식|11|→|
|일치 표현식|같음, 같지 않음|==, !=|표현식==표현식, 표현식!=표현식|10|→|

- 예시
  - 관계 표현식
    ```c
    3 < 4         // true
    12.78 < 7.36  // false
    5 <= 3.24     // false (5는 5.0으로 promotion)
    5.0 <= 5      // true (5는 5.0으로 promotion)
    3 > false     // true (false는 0으로 promotion)
    5 >= 2.2      // true (5는 5.0으로 promotion)
    ```
  
  - 일치 표현식
    ```c
    3 == 4        // false
    true == false // false (1 == 0)
    true != false // true (1 != 0)
    3 != false    // true (3 != 0)
    65 != 'A'     // false('A'는 65로 변경됨)
    ```

  - 우선 순위와 결합 순서
    ```c
    3 < 4 == 1    // (3 < 4) → true, (true == 1) → (1 == 1) : true 
    2 < 3 < 0     // (2 < 3) → true, (true < 0) → (1 < 0) : false
    3 <= 6 < 5    // (3 <= 6) → true, (true < 5) → (1 < 5) : true
    4 == 4 < 2    // (4 < 2) → false, (4 == false) → (4 == 0) : false ** 관계표현식의 우선순위가 더 높음! **
    ```

- 주의사항
  - **부동 소수점 값**에는 `일치 연산자`를 **사용하지 않는 것이 안전**
    - 시스템마다 내부적으로 부동 소수점을 저장하는 방식이 다르기 때문에 정밀도 차이로 예상하지 못한 결과가 나올 수 있음
      ```c
      x == 2.78123  // x가 2.78123이더라도 false가 나올 수도 있음!
      x != 14.67823 // x가 14.67823이더라도 true가 나올 수도 있음!
      ```
  - 일치 연산자가 아니라 할당 연산자를 사용한 경우
    ```c
    if (x = 0)
    {
      statement; // 해당 statement는 절대 실행되지 않음
    }
    ```
  - 괄호를 생략한 경우
    ```c
    if (x == 0)
      statement1; // statement1은 x가 0일 경우에만 실행됨
      statement2; // statement2는 항상 실행됨
    ```
  - 불필요한 세미콜론을 붙인 경우
    - 단독 if문
      ```c
      if (x == 0); // if-statement의 body가 없는 문장이 됨
      {
        statement1; // statement1은 항상 실행됨
        statemnet2; // statement2는 항상 실행됨
      }
      ```
    - if-else문
      ```c
      if (b) ; // 조건식이 아닌 하나의 문장처럼 처리됨
      {
        statement1
      }
      else // 컴파일러가 else만 있는 문장으로 판단하여 에러 발생시킴
      {
        statement2
      }
      ```
  
### 여러 방향 조건 분기

- Non-Compact
  ```c
  if (condition 1)
    statement 1;
  else
    if (condition 2)
      statement 2;
    else
      if (condition 3)
        statement 3;
      else
        if (condition 4)
          statement 4;
        else
          statement 5;
  ```

- Compact
  ```c
  if (condition 1)
    statement 1;
  else if (condition 2)
    statement 2;
  else if (condition 3)
    statement 3;
  else if (condition 4)
    statement 4;
  else
    statement 5;
  ```

### 논리 표현식

- 피연산자 하나 이상이 불 자료형이고 최종적으로 불 자료형을 생성
- NOT(!, 논리 부정), AND(&&, 논리 곱), OR(||, 논리 합) 3가지 종류의 논리 연산자가 있음
  |그룹|이름|연산자|표현식|우선순위|결합방향|
  |--|--|--|--|--|--|
  |단항표현식|NOT|!|!표현식|**17**|←|
  |관계표현식|작음, 작거나 같음, 큼, 크거나 같음|<, <=, >, >=|표현식<표현식, 표현식<=표현식, 표현식>표현식, 표현식>=표현식|11|→|
  |일치표현식|같음, 같지 않음|==, !=|표현식==표현식, 표현식!=표현식|10|→|
  |논리표현식|AND, OR|&&, \|\||표현식&&표현식, 표현식\|\|표현식|**6**(=AND), 5(=OR)|→|

- NOT 표현식 사용
  - NOT 표현식은 논리 표현식의 값을 반전
  - 논리 표현식의 원래 값이 true라면 결과가 false이며, 원래 값이 false라면 true가 됨
  - 예시 : 윤년 계산
    - 달력에서 2월은 총 28일
    - 그런데 윤년에는 2월 29일도 있음
    - 윤년을 확인하려면 3가지 조건이 필요
      - 1년은 400으로 나눌 수 있다면 윤년!
      - 또는 4로 나눌 수 있지만 100으로 나눌 수 없다면 윤년!
      - `윤년 = (400으로 나눌 수 있는가?) || (4로 나눌 수 있는가? && !(100으로 나눌 수 있는가?))`

### switch 조건문

- 여러 방향 조건 분기 구문
- 특정한 값을 기반으로 조건을 분기할 때 사용
  ```c
  switch(표현식)
  {
    case 값1 : 문장1

    case 값2 : 문장2

    case 값3 : 문장3

    case 값4 : 문장4

  }
  ```

- **break 구문**
  - switch 조건문을 여러 방향 조건 분기에 사용하려면 break 구문 사용
  - 특정 조건이 일치할 때, 그 문장만 실행되도록 할 때 사용
    - 해당 문장 실행 후 break로 빠져나감!

- **default 분기**
  - switch 구문의 모든 case 분기에도 진입하지 못한 경우 특정 문장을 실행하고 싶다면 default 분기 사용
  - switch 조건문의 마지막 부분에서 한 번만 사용 가능
  - 입력이 잘못되었다는 것을 감지할 때 활용

- **분기 결합**
  - case 분기에서 실행해야 하는 작업이 같다면 분기를 결합해서 활용할 수 있음
  - switch 조건문이 case 분기에 진입하면 break 구문을 만나기 전까지 모든 문장을 실행하기 때문에 분기를 결합해서 사용할 수 있음
    - 여러 개의 경우를 하나의 case로 만드는 것
    ```c
    switch(grade)
    {
      case 'A':
      case 'B':
      case 'C': cout << "Grade is pass";
                break;
      ...
    }
    ```

### 조건부 표현식(conditional expression)

- C++에서 유일한 삼항 연산자
- 삼항 연산자는 피연산자를 3개(조건, 표현식1, 표현식2) 사용하는 연산자를 의미
- 연산자 : `? :`
- 우선순위 : 4
- 결합방향 : →
- 형태
  - `조건 ? 표현식1 : 표현식2`

## ▣ 반복문

### 후위 표현식과 전위 표현식

- 후위 증가/감소 표현식과 전위 증가/감소 표현식
  |그룹|이름|연산자|표현식|우선순위|결합방향|
  |--|--|--|--|--|--|
  |후위|후위증가, 후위감소|++, --|lvalue++, lvalue--|18|→|
  |전위|전위증가, 전위감소|++, --|++lvalue, --lvalue|17|←|
- 후위 증가/감소 표현식
  - 후위(뒤에 위치)라는 의미처럼 피연산자 뒤에 연산자가 옴
  - **부가 효과가 일어나기 전에 값을 리턴**
    - `이전상태 : x == 3` → `표현식 : x++` → `리턴값 : 3` → `이후 상태 : x == 4`
    - `이전상태 : y == 8` → `표현식 : y--` → `리턴값 : 8` → `이후 상태 : y == 7`
- 전위 증가/감소 표현식
  - 전위(앞에 위치)라는 의미처럼 피연산자 앞에 연산자가 옴
  - **부가 효과가 먼저 일어나고 그 다음에 값을 리턴**
    - `이전상태 : x == 3` → `표현식 : x++` → `이후 상태 : x == 4` → `리턴값 : 4`
    - `이전상태 : y == 8` → `표현식 : y--` → `이후 상태 : y == 7` → `리턴값 : 7`

### 반복문의 종류

- while
  - 조건을 먼저 확인

- for
  - 조건을 먼저 확인

- do-while
  - 조건을 나중에 확인

### 반복문 비교

|항목|while 반복문|for 반복문|do-while 반복문|
|--|--|--|--|
|조건 확인 시점|본문 실행 전|본문 실행 전|본문 실행 후|
|일반적인 제어 방식|이벤트 제어|카운트 제어|이벤트 제어|
|최소 반복 횟수|0|0|1|
|조건 확인 횟수|n+1|n+1|n|

### while 반복문

- 이벤트 제어 while 반복문
  - 특정 이벤트가 발생하면 반복문을 종료
    ```c
    첫 번째 항목 입력
    while(이벤트가_발생하지_않는_조건)
    {
      행동(s)
      다음_항목_입력
    }
    ```
- 센티넬 제어 while 반복문
  - 센티넬은 '보초, 감시병'을 의미
  - 데이터 처리에서 센티넬은 처리 중지를 나타내기 위해 데이터 리스트에 존재하는 특별한 항목
  - 예시) 양의 정수로 이루어진 긴 리스트에서 리스트의 마지막 부분에 센티넬로 '음의 정수'를 넣음

- EOF 제어 while 반복문
  - **키보드**로부터 입력 받는 경우 : `cin`
    - EOF 발생 조건
      - Unix : `Ctrl + d`
      - 윈도우 : `Ctrl + z`
    - 키보드로부터 읽기
      ```c
      while (cin >> num) // EOF를 사용하면 조건식 안에 console 입력을 받는 부분 넣을 수 있음!
      {
        process;
      }
      ```
  - **파일**로부터 입력 받는 경우 : `infile`
    - 파일의 끝에 EOF 생성됨
    - 파일로부터 읽기
      ```c
      while (infile >> num)
      {
        process;
      }
      ```
- 플래그 제어 while 반복문
  - 조건이 발생하지 않을 경우를 대비해서 다른 제어 메커니즘과 함께 사용

- **주의사항**
  - 반복하지 않는 반복문은 사용하지 않는 것이 좋음
    - 예시) 불 표현식이 처음부터 false라면 프로그램을 여러 번 실행해도 반복무 내부에 진입초자 하지 않음
      ```c
      while (false)
      {
        ...
      }

      // 또는
      
      while (2 == 3)
      {
        ...
      }
      ```
  - 무한하게 반복하는 반복문
    - 반복문 내부를 무한하게 반복하는 반복문도 주의
    - 불 표현식이 항상 true일 때 발생
  - 본문이 없는 반복문
    - while 반복문의 헤더 뒤에 세미콜론을 추가하는 경우
    - 세미콜론을 추가하면 컴파일러가 헤더 뒤에 널 문장이 있다고 판단
  - **조건으로 부동 소수점을 사용하는 반복문**
    - 시스템에 따라서 부동 소수점의 정밀도가 다름
    - 부동 소수점을 조건에 사용할 때는 주의해야 함!

- 지연 발생
  - while 반복문을 사용해서 지연을 발생시킬 수 있음
    ```c
    int counter = 0;
    while (counter < 100000)
    {
      counter++;
    }
    ```

- while 반복문 정리
  - 반복 횟수 : n번
  - 조건 확인 횟수 : n+1번
    - n번의 조건 확인은 조건이 true이고, 마지막 n+1번의 조건 확인은 조건이 false여야 함!

### for 반복문

- 카운터 제어 반복문을 더 쉽게 사용할 수 있도록 제공
- while 반복문과 for 반복문
  ```c
  // while
  초기화;
  while(조건)
  {
    실행할_문장
    변경;
  }

  // for
  for(초기화; 조건; 변경)
  {
    실행할_문장
  }
  ```

- for 반복문 헤더
  - 만약 조건 부분이 비어있으면 `true`가 입력된 것으로 간주
    ```c
    for (int i = 0 ; ; i++) { ... } // 무한 반복
    ```
  - 조건 부분이 아예 없으면 컴파일 되지 않음!
    ```c
    for (int i = 0 ; i++) // 컴파일 에러
    ```

### do-while 반복문

- 조건 확인이 본문을 실행한 뒤에 일어남
- do-while 반복문은 본문이 적어도 한 번은 실행됨
- do-while 반복문은 반드시 뒤에 세미콜론이 있어야 함
- **데이터 유효성 검사**
  - 사용자로부터 어떤 기준에 맞는 데이터를 입력받야아 하는 프로그램에서 사용자가 올바른 형태로 데이터를 입력했는지 확인하는 것
  - 예시) 어떤 사이트에 가입할 때 이메일, 전화번호 등 필수 입력 항목을 확인하는 것

- do-while 반복문 정리
  - 반복 횟수 : n번
  - 조건 확인 횟수 : n번

### 중첩 반복문

- 반복문 내부에 반복문을 넣어 구성하는 것을 중첩 반복문(nested loop)이라고 함
- 외부의 반복문과 내부의 반복문을 다른 반복문 조합(*while반복문*과 *for반복문*으로 조합 등)으로 사용할 수 있음!

### 반복문과 관련된 구문

- return 구문
  - 현재 함수를 종료하고 함수를 호출한 쪽으로 제어를 리턴
  - 반복문에서 return 구문을 사용하면 반복문이 종료되며, 동시에 반복문이 소속된 함수(main 함수 등)도 종료

- break 구문
  - 반복을 중간에 종료하고 반복문을 벗어남
  - 하지만 되도록 break 구문을 사용하지 않는 것이 좋음
    - break 구문 대신 조건 **플래그(flag)** 사용!
    ```c
    // break 사용 -> 추천X
    while (expression)
    {
      Statement1
      if (condition)
        break;
      Statement2
    }

    // 조건 플래그 사용 -> 추천O
    while (expression && !condition)
    {
      Statement1
      if (!condition) Statement2
    }
    ```

- continue 구문
  - continue 밑의 부분을 실행하지 않고 다시 while문 조건식(표현식)으로 올라감
  - break와 달리 while문을 빠져나가지는 않음
    ```c
    // 경우1 : while문
    while(표현식)  // *
    {
      ...
      if(조건)
        continue; // continue를 만나면 다시 while(표현식)으로 올라감! 
      ...         // 이 부분은 실행되지 않음!
    }
    
    // 경우2 : do-while문
    do
    {
      ...
      if(조건)
        continue; // continue를 만나면 while(표현식) 부분으로 넘어감! 
      ...         // 이 부분은 실행되지 않음!
    }
    while(표현식); // *

    // 경우3 : for문
    for(초기화; 표현식; 변경) // *
    {
      ...
      if(otherCondition)
        continue;          // continue를 만나면 for(표현식) 부분으로 넘어감! 
      ...                  // 이 부분은 실행되지 않음!
    }
    ```

- goto 구문
  - 형태
    ```c
    goto 레이블
    ```
  - 동일한 함수 내부에서 레이블 구문으로 표시된 부분으로 이동
  - 프로그램의 구조가 깨지고 코드가 이리저리 날 뛰는 스파게티 코드가 되어, 코드를 이해하거나 디버깅하기 힘듦
    - 거의 사용하지 않음!